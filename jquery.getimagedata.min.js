/*
 *
 *  jQuery $.getImageData Plugin 0.3
 *  http://www.maxnov.com/getimagedata
 *
 *  Written by Max Novakovic (http://www.maxnov.com/)
 *  Date: Thu Jan 13 2011
 *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *
 *  Includes jQuery JSONP Core Plugin 2.4.0 (2012-08-21)
 *  https://github.com/jaubourg/jquery-jsonp
 *  Copyright 2012, Julian Aubourg
 *  Released under the MIT License.
 *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *
 *  Copyright 2011, Max Novakovic
 *  Dual licensed under the MIT or GPL Version 2 licenses.
 *  http://www.maxnov.com/getimagedata/#license
 *
 */
(function(d){function c(){}function t(a){u=[a]}function g(a,c,d){return a&&a.apply(c.context||c,d)}function f(a){function f(b){n++||(p(),q&&(w[e]={s:[b]}),C&&(b=C.apply(a,[b])),g(x,a,[b,D,a]),g(E,a,[a,D]))}function v(b){n++||(p(),q&&b!=F&&(w[e]=b),g(y,a,[a,b]),g(E,a,[a,b]))}a=d.extend({},G,a);var x=a.success,y=a.error,E=a.complete,C=a.dataFilter,r=a.callbackParameter,H=a.callback,W=a.cache,q=a.pageCache,I=a.charset,e=a.url,h=a.data,J=a.timeout,s,n=0,p=c,b,k,z;K&&K(function(a){a.done(x).fail(y);x=
a.resolve;y=a.reject}).promise(a);a.abort=function(){!n++&&p()};if(!1===g(a.beforeSend,a,[a])||n)return a;e=e||l;h=h?"string"==typeof h?h:d.param(h,a.traditional):l;e+=h?(/\?/.test(e)?"&":"?")+h:l;r&&(e+=(/\?/.test(e)?"&":"?")+encodeURIComponent(r)+"=?");W||q||(e+=(/\?/.test(e)?"&":"?")+"_"+(new Date).getTime()+"=");e=e.replace(/=\?(&|$)/,"="+H+"$1");q&&(s=w[e])?s.s?f(s.s[0]):v(s):(L[H]=t,b=d(M)[0],b.id=N+X++,I&&(b[Y]=I),O&&11.6>O.version()?(k=d(M)[0]).text="document.getElementById('"+b.id+"')."+
A+"()":b[P]=P,Z&&(b.htmlFor=b.id,b.event=B),b[Q]=b[A]=b[R]=function(a){if(!b[S]||!/i/.test(b[S])){try{b[B]&&b[B]()}catch(c){}a=u;u=0;a?f(a[0]):v(T)}},b.src=e,p=function(a){z&&clearTimeout(z);b[R]=b[Q]=b[A]=null;m[U](b);k&&m[U](k)},m[V](b,r=m.firstChild),k&&m[V](k,r),z=0<J&&setTimeout(function(){v(F)},J));return a}var P="async",Y="charset",l="",T="error",V="insertBefore",N="_jqjsp",B="onclick",A="on"+T,Q="onload",R="onreadystatechange",S="readyState",U="removeChild",M="<script>",D="success",F="timeout",
L=window,K=d.Deferred,m=d("head")[0]||document.documentElement,w={},X=0,u,G={callback:N,url:location.href},O=L.opera,Z=!!d("<div>").html("\x3c!--[if IE]><i><![endif]--\x3e").find("i").length;f.setup=function(a){d.extend(G,a)};d.jsonp=f})(jQuery);
(function(d){d.getImageData=function(c){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(c.url){var g="https:"===location.protocol,f="",f=!c.server||!t.test(c.server)||g&&0==c.server.indexOf("http:")?"//img-to-json.appspot.com/":c.server;d.jsonp({url:f+"?callback=?",data:{url:escape(c.url)},dataType:"jsonp",timeout:1E4,success:function(f,g){var l=new Image;d(l).load(function(){this.width=f.width;this.height=f.height;typeof c.success==typeof Function&&c.success(this)}).attr("src",
f.data)},error:function(d,f){typeof c.error==typeof Function&&c.error(d,f)}})}else typeof c.error==typeof Function&&c.error(null,"no_url")}})(jQuery);
